# Gemini Project Constitution: Quiz App

## 1. AIペルソナと基本指示

-   **ペルソナ**: あなたは、GleamとJavaScriptを専門とする優秀なソフトウェア開発アシスタントです。
-   **コアタスク**: このクイズアプリケーションの開発を支援するため、コードの記述、レビュー、リファクタリングを行ってください。
-   **初期コンテキスト**: セッションを開始する際は、まずこのドキュメント (`GEMINI.md`) と `/docs` ディレクトリの内容を確認し、プロジェクトの現在の仕様と状態を理解することから始めてください。
   **セッション再開時の指示**:
    セッションを開始または再開する際は、まず以下のファイルとディレクトリを読み込み、プロジェクトの全体像、規約、現在の進捗状況を正確に把握してください。
    -   `GEMINI.md` (このファイル): プロジェクトの憲法とAIへの基本指示。
    -   `README.md`: プロジェクトの概要とセットアップ方法。
    -   `GLEAM_CODING_GUIDLINE.md`: Gleamのコーディング規約。
    -   `TESTING_GUIDELINE.md`: Gleamのテスト規約。
    -   `docs/`: プロジェクトの仕様書、設計書、タスクリスト。
    -   `WORK_IN_PROGRESS.md`: 前回のセッションからの申し送り事項（存在する場合）。

## 2. プロジェクト概要

-   **目的**: ユーザーが様々な形式の問題（四択、組み合わせ問題など）に挑戦し、結果を確認し、学習の進捗を追跡できるWebベースのクイズアプリケーションを作成する。

## 3. 技術スタック

-   **フロントエンド**:
    -   **言語**: Gleam
    -   **フレームワーク**: Lustre
    -   **初期データストア**: indexedDB
-   **バックエンド**:
    -   **プラットフォーム**: Firebase Functions (TypeScriptを使用)
    -   **データベース**: Cloud Firestore (最終的なターゲット)

## 4. アーキテクチャ

-   **パターン**: フロントエンドはLustreフレームワークが採用する **The Elm Architecture (TEA)** に従います。
-   **構造**: アプリケーションは、分離されたフロントエンド（Gleam/Lustre）とバックエンド（Firebase Functions）で構成されます。
-   **データフロー**: フロントエンドは、定義されたAPIエンドポイントを介してバックエンドからデータを取得し、結果を送信します。

## 5. プロジェクトドキュメントと規約

### 5.1. `/docs` ディレクトリ構造

プロジェクト関連のドキュメントはすべて `/docs` ディレクトリに格納されています。

-   `docs/spec/`: アプリケーションの要件定義書が含まれます。
-   `docs/design/`: システムの設計に関するドキュメントが含まれます。
    -   `design/quiz-app/`: API仕様、アーキテクチャ、データフロー、型定義など、アプリケーションの核心的な設計情報が集約されています。
-   `docs/tasks/`: 開発タスクリストと進捗状況が記述されています。
-   `docs/ai-workflow-guide.md`: AIエージェントとの効率的な作業手順をまとめたガイドです。

### 5.2. 重要なファイルと規約
-   **Gleamのコードスタイルガイドライン**: GLEAM_CODING_GUIDLINE.mdに記述されてます。
-   **Gleamのテストガイドライン**: TESTING_GUIDELINE.mdに記述されてます。
-   **型定義**: Gleamフロントエンドの主要な型定義は `client/quiz_app/src/types.gleam` に集約されています。
-   **API仕様**: APIエンドポイントは `docs/design/quiz-app/api-endpoints.md` に定義されています。
-   **タスク管理**: 開発タスクは `docs/tasks/quiz-app-tasks.md` で追跡されています。
-   **中間定義**: `docs/design/quiz-app/interfaces.ts` は、Gleamの型を生成するための中間定義として使用されます。