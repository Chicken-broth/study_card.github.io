# 画面設計書

## 1. 画面一覧

- **Home画面**: アプリケーションのメイン画面
- **クイズ画面**: クイズに回答する画面
- **リザルト画面**: クイズの結果を表示する画面
- **集計画面**: 学習履歴や成績を表示する画面

## 2. 画面詳細

### 2.1. Home画面

- **目的**: ユーザーにクイズの開始を促し、学習履歴への導線を提供する。
- **コンポーネント**:
    - **ヘッダー**
        - `Logo`: アプリケーションのロゴを表示
    - **メインコンテンツ**
        - `QuizSettingsForm`:
            - `CategorySelector`: GET `/api/categories` で取得したカテゴリ一覧をチェックボックスで表示。最低1つは選択必須。
            - `QuestionCountSelector`: ラジオボタンで出題数（10/20/50）を選択。
            - `StartQuizButton`: `QuizSettingsForm` の内容を検証し、問題がなければクイズ画面に遷移。
            - `ViewHistoryButton`: 集計画面に遷移。
    - **フッター**
        - `Footer`: コピーライト情報を表示

### 2.2. クイズ画面

- **目的**: ユーザーがクイズに集中して回答できるようにする。
- **コンポーネント**:
    - **ヘッダー**
        - `QuizHeader`: 
            - 選択カテゴリ名を表示
            - `ProgressIndicator`: 問題の進捗（例: 3 / 10）を表示
    - **メインコンテンツ**
        - `QuestionArea`:
            - `QuestionText`: 問題文を表示
            - `InteractionArea`: `question_interaction` の `type` に応じてコンポーネントを切り替える
            - `MultipleChoiceOptions`: 
                - 四択問題の選択肢をボタンとして表示する。
                - ユーザーが選択肢ボタンをクリックすると、即座に正解・不正解が判定される。
                - 正解の選択肢は緑色でハイライトされる。
                - 不正解の選択肢を選んだ場合、その選択肢は赤色でハイライトされ、正解の選択肢が緑色で示される。
                - ユーザーは別の選択肢を選び直すことができる。また、選択済みの選択肢を再度クリックすると、選択が解除される。
                - 解答状態（「正解です！」など）が選択肢の下に表示される。
            - `AssociationPairs`: 組み合わせ問題のペアを操作可能に表示
    - **フッター**
        - `NextButton`: 次の問題へ進む。最後の問題の場合はリザルト画面へ遷移。

### 2.3. リザルト画面

- **目的**: クイズの結果を分かりやすく伝え、復習を促す。
- **コンポーネント**:
    - **ヘッダー**
        - `ResultHeader`: 「結果」というタイトルを表示
    - **メインコンテンツ**
        - `ScoreSummary`: 正解数、総問題数、正解率を表示
        - `ResultList`: 各問題と正解/不正解のリストを表示
    - **フッター**
        - `HomeButton`: Home画面に戻る
        - `RetryButton`: 同じ設定（カテゴリ、問題数）で新しいクイズを開始する
- **データフロー**:
    - 画面表示時に `POST /api/quiz-results` を実行し、解答結果をサーバーに送信する。

### 2.4. 集計画面

- **目的**: ユーザーが自身の学習状況を把握し、モチベーションを維持できるようにする。
- **コンポーネント**:
    - **ヘッダー**
        - `HistoryHeader`: 「学習履歴」というタイトルを表示
    - **メインコンテンツ**
        - `OverallStats`: 全体の総問題数と平均正解率を表示
        - `CategoryStatsList`: カテゴリごとの正解率をリストで表示
        - `ActivityCalendar`: 日付ごとの学習記録をカレンダー形式で可視化
    - **フッター**
        - `HomeButton`: Home画面に戻る
- **データフロー**:
    - 画面表示時に、サーバーから集計データを取得するAPIを呼び出す。（※このAPIは未定義）
