# 4. 学習履歴のIndexedDBへの保存

**ステータス**: 実装済み

## コンテキスト

- ユーザーは、過去の学習履歴や成績を振り返り、進捗を確認したいと考えている (要件定義書 ストーリー3)。
- 現在の実装では、クイズが完了するとその結果は破棄され、永続化されていない。
- このままでは、学習の進捗を追跡したり、苦手な分野を分析したりすることができない。

## 決定

- 1回のクイズ挑戦の結果を「クイズ結果 (`QuizResult`)」としてモデル化し、
クイズ結果のリストを学習履歴とし、クライアントサイドのIndexedDBに保存する。

### 1. データモデル
QuizResults
- QuizResult[]

QuizResult
- id : Int
- category : QusetionCategory
- answer : List(Answer)


### 2. IndexedDBスキーマの更新

- `quiz_results` という名前の新しいオブジェクトストアを追加する。
- `id` をキーパス（主キー）として設定する。

### 3. データ保存のフロー

- **タイミング**: リザルト画面からHome画面に遷移したタイミング。
- **処理**:
  1. `quiz_home.gleam` で、クイズ完了時に生成された`QuizResult`をIndexedDBに保存する処理を呼び出す。

## 結果

- **ポジティブ**:
  - ユーザーの学習履歴がブラウザに永続化され、いつでも振り返ることが可能になる。
  - 将来的に、カテゴリごとの正答率分析や、学習アクティビティのカレンダー表示など、より高度な集計機能の基盤となる。
- **ネガティブ**:
  - ブラウザのストレージ容量を消費する。
  - ユーザーがブラウザのデータを消去すると、学習履歴も失われる。
