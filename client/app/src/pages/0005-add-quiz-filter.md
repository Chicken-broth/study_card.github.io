# 5. 未回答クイズフィルター機能の追加

**ステータス**: 承認済み

## コンテキスト

- ユーザーは多くのクイズをこなしていくと、どの問題が未回答なのか判別が難しくなる。
- 効率的に学習を進めるため、まだ回答していない問題に絞って挑戦したいというニーズがある (要件定義書 ストーリー4)。
- 現在の実装では、カテゴリや問題数での絞り込みしかできず、個々の問題の回答状況に基づいたフィルタリングはできない。

## 決定

- Home画面のオプションエリアに「未回答の問題のみ」というフィルター機能（チェックボックス）を追加する。
- このフィルターが有効な場合、IndexedDBに保存されている`quiz_results`（学習履歴）を参照する。
- 学習履歴に含まれるすべての問題IDを「回答済み」とみなし、クイズ対象の問題リストからこれらを除外する。
- このフィルタリングロジックは `quiz_home.gleam` の `filtering_question_id` 関数、またはその周辺に実装する。

### データフローの変更

1.  `quiz_home`コンポーネントは、初期化時に`quiz_results`をIndexedDBから読み込む（これは`TASK-207`で実装済み）。
2.  ユーザーが「未回答の問題のみ」チェックボックスをオンにする。
3.  `update`関数がメッセージを処理し、`Model`の状態を更新する。
4.  `filtering_question_id`関数が、全問題リストと`quiz_results`を比較し、未回答の問題IDのみを返す。
5.  選択中の問題数が更新され、UIに反映される。

## 結果

- **ポジティブ**:
  - ユーザーは未回答の問題に集中して取り組めるようになり、学習効率が向上する。
  - 全ての問題を一度解いた後、再度挑戦する際にも、フィルターをオフにすることで対応できる。
- **ネガティブ**:
  - 学習履歴データが増加すると、フィルタリング処理の計算量がわずかに増加する。しかし、クライアントサイドで完結する処理であり、問題数は現実的な範囲（数千問レベル）と想定されるため、パフォーマンスへの影響は軽微。